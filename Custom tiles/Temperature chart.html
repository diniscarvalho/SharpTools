<!-- 
  README
  Create a SmartThings 'Personal Access Token' with access to devices and use it
  for the 'token' setting in the tile.

  https://account.smartthings.com/tokens

  Light dimmer created by Dinis Carvalho, inspired by Joshua's scenes tile:
  https://github.com/joshualyon/custom-tile-demos/tree/main/smartthings-scenes/
-->
<!-- Do not edit below -->
    <script type="application/json" id="tile-settings">
        {
        "schema": "0.1.0",
        "settings": [
            {"name": "token", "label": "Token", "type": "STRING"},
            {"name": "DeviceID", "label": "Device ID", "type": "STRING"}
        ],
        "name": "Temperature chart [shortyyy]"
        }
    </script>
    <!-- Do not edit above -->
    <!-- Styles -->
    <style>    
    .main-content {
        display: flex;
        align-items: center;
        justify-content: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    .dca-menu {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: stretch;
    }
    .dca-menu-item {
        flex: 1;
        display: flex;
        background-color: rgba(0,0,0, 0.2);
        width: 100%;
    }
    .dca-menu-item:not(:last-child) {
        margin-bottom: 10px;
    }
    .dca-menu-item img{
        width: 32px;
        height: 32px;
        color: #fff !important;
    }   
    
    </style>
    
    <!-- Scripts -->
    <script src="https://cdn.sharptools.io/js/custom-tiles.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script>
    var content = document.getElementById("mainContent");
    var patToken = null;
    var deviceId = null;
    var devices = [];
    var baseUrl = "https://api.smartthings.com/v1/devices";
    
    function init() {
        // build chart
    }
    
    function getAxiosConfig(){
        return { "headers": { "Authorization": "Bearer " + patToken } }
    }
        
    stio.ready((data)=>{
        // update correct settings and call init with active menu
        console.log("Starting Temperature Chart [shortyyy]");
        console.log("stio library is ready with token", data.settings.token);
        console.log("device ID token", data.settings.LightID);
        if(data.settings.token == null || data.settings.LightID == null){
            console.log("Tile not configured properly");
            return;
        }
        else {
            patToken = data.settings.token;
            deviceId = data.settings.LightID;
        } 
        init();
    });    
    
    </script>
    
    <!-- HTML -->
    <div class="main-content" id="mainContent">
        <div class="dca-temp-chart">
        </div>
    </div>